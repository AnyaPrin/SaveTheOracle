<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="minfilia.css" >
    <style>
      :root {
	  --link: #92b2c8;
	  --menu: #92b2c8;
	  --bg-color: #000001;
	  --text-color: #f0f0f0;
	  --panel: rgba(255,255,255,0.05);
	  --panela: rgba(0,0,0,0.15);
	  --acc-b: #2f81f7;
	  --acc-g: #2d333b;
	  --border: #444c56;
	  --shadow: 0 4px 24px 0 rgba(0,0,0,0.15);
      }
      #info{
	  display:block;
    	  font-family: 'Nimbus Mono','IPAゴシック','courier','Ariel';
	  position:fixed;
	  top: 64px;
	  left: 644px;
	  width:440px;
	  height:320px;
	  background:var(--panel);
	  font-size:10pt;
	  z-index:100;
      }
      #solver{
	  display:block;
    	  font-family: 'Nimbus Mono','IPAゴシック','courier','Ariel';
	  position:fixed;
	  top: 64px;
	  left: 644px;
	  width:440px;
	  height:320px;
	  background:var(--panel);
	  font-size:10pt;
	  z-index:100;
      }
      #offhcanvas {
	  background:black;
	  z-index:200;
      }
      #modal {
          position: fixed;
          top: 0;
          left: -100vw; /* 画面左側に隠す */
          width: 100vw;
          height: 100vh;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
	  justify-content: flex-start;
	  transition: left 0.5s ease-in-out; /* アニメーションを追加 */
	  z-index: 200;
	  /*          pointer-events: none; 初期状態ではクリックを無効化 */
      }
      
      #modal.is-active {
	  left: 0; /* アクティブなときに表示する */
	  pointer-events: auto; /* アクティブなときにクリックを有効化 */
      }
      
      .modal-content {
	  background-color: var(--panel);
	  padding: 2em;
	  border-radius: 16px;
	  color: var(--text-color);
	  box-shadow: var(--shadow);
	  max-width: 400px;
	  height: 100%;
	  transform: translateX(-100%);
	  transition: transform 0.5s ease-in-out;
      }
      #modal.is-active .modal-content {
	  transform: translateX(0);
      }
      #close-modal {
	  position: absolute;
	  top: 10px;
	  right: 20px;
	  font-size: 1em;
	  color: var(--text-color);
	  background: none;
	  border: none;
	  cursor: pointer;
      }
      /* switch */
      .canvas-container {
	  position: relative;
	  display: inline-block;
      }
      /* Canvas本体 */
      #graphcanvas {
	  position:fixed;
	  top: 60px;
	  left: 640px;
	  width:1024px;
	  height:800px;
	  background:black;
	  z-index:1;
	  border-radius: 14px;
      }

      #graphcanvas.fade {
        opacity:0;
        transition: opacity 0.8s ease-in-out;
      }

      #graphcanvas.fade.visible {  opacity:1;      }

      #puzzlecanvas {
	  display:block;
	  position:fixed;
	  top: 60px;
	  left: 30px;
	  width:600px;
	  height:800px;
	  background:black;
	  z-index:1200;
	  border-radius: 14px;
      }

      /* スイッチ配置 */
      .switch-vertical {
	  position: fixed;
	  top: 84px;
	  right: 24px;
	  width: 20px;
	  height: 40px;
	  z-index: 1000;
	  border: 2px solid #999;
	  border-radius: 20px;
	  box-shadow: inset 0 0 5px rgba(255,255,255,0.6), 0 4px 8px rgba(0,0,0,0.3);
	  display: flex;
	  align-items: center;
	  justify-content: center;
      }
      .switch-vertical input {
	  opacity: 0;
	  width: 0;
	  height: 0;
      }
      .switch-label {
	  position: absolute;
	  top: -24px;
      }
      
      .slider-vertical {
	  position: absolute;
	  cursor: pointer;
	  background: radial-gradient(circle at 30% 30%, #000, #012158);
	  box-shadow: 1px 1px 1px rgba(24,20,84,0.4);
	  border: 2px solid #032389;
	  top: 0; left: 0;
	  right: 0; bottom: 0;
	  background-color: #032359;
	  transition: 0.4s;
	  border-radius: 8px;
      }
      .slider-vertical:before {
	  position: absolute;
	  content: "";
	  width: 17px; height: 18px;
	  left: 0px; top: 0.5px;
	  background: radial-gradient(circle at 30% 30%, #697952, #1a238c);
	  transition: 0.5s;
	  border-radius: 8px;
      }
      input:checked + .slider-vertical {
	  background: radial-gradient(circle at 40% 30%, #032359,#014178);
      }
      input:checked + .slider-vertical:before {
	  transform: translateY(18px);
      }
      
      .icon-btn img {
          width: 24px;
          height: 24px;
      }
      #clipboard {
	  position:fixed;
	  top:10px;
	  right:50px;
	  width:0;
	  height:0;
	  diplay: none;
	  z-index:2000;
      }
    </style>
    <script src="../lib/three.min.js"></script>
    <script src="../lib/GLTFLoader.js"></script>
    <script src="../lib/OrbitControls.js"></script>
    <script src="../lib/common.js"></script>
    <title>Save The Oracle WEB v1.6</title>
    <button id="clipboard" class="icon-btn" >
      <img src="../img/icon/clipboard.png" alt="statStr copy to Clipboard">
    </button>      
  </head>
  <body>
    <header>
      <span style="font-size:16pt">Save The Oracle</span>
      <span style="font-size:10pt"> Final Fantasy XIV unofficial mini-game</span>
    </header>
    <main>
      <canvas id="puzzlecanvas" class="fade"></canvas>
      <canvas id="graphcanvas" class="fade"></canvas>
      <div id="modal">
      <div class="modal-content" id="info">
	<div id="close-modal"></div>
	<h2>Info.</h2>
	<h2>Solver.</h2>	
      </div>
      <label class="switch-vertical">
	<input type="checkbox" id="lightSwitch" onchange="toggleFade()">
	<span class="slider-vertical"></span>
	<div class="switch-label">nodes</div>
      </label>
    </main>
    <footer>
      <hr>
      画像:FINAL FANTASY XIV ⒸSQUARE ENIX <br>
      効果音: windows10 microsoft<br>
      <a class="btn" href="https://github.com/AnyaPrin" target="_blank" rel="noopener">
	mifilia.js v.1.6 &copy; 2025 AnyaPrin / Powered by GitHub Pages </a>
      <span style="position:fixed;right:20px;">
	<a class="btn" href="https://github.com/" target="_blank" rel="noopener">
	  <img width="20" src="../img/github-mark-white.png"> GitHub </a> </span>
    </footer>
  </body>
  <script src="puzzle.js"></script>
  <script src="graph.js"></script>
  <script>
    function toggleFade() {
	const canvas = document.getElementById("graphcanvas");
	canvas.classList.toggle("visible");
    }

  </script>
</html>
